---
name: ship-it
description: "Creates a GitHub PR using jj and gh. Use when asked to ship, create a PR, or push changes."
---

# Ship It

Reviews and ships the current changes as a GitHub PR.

## Workflow

1. Gather context:
   - Run `jj status` to see current status
   - Run `jj diff -f main` to see the diff from main
   - Run `jj log -r main::` to see commits from main

2. **Review the changes** before proceeding:
   - Code quality and best practices
   - Potential bugs or issues
   - Performance considerations
   - Memory safety (leaks, double-frees, proper use of `errdefer`)
   - Test coverage

   Use the repository's AGENTS.md for guidance on style and conventions. If you find any issues, stop and report them to the user instead of creating the PR.

3. Add commit description if empty with an appropriate commit message using `jj describe -m "Commit description"`
4. Create a new empty change using `jj new`
5. Push the change to upstream using `jj git push -c @-`
6. Get the autogenerated bookmark name (should be something like `push-*`) using `jj bookmark list -r 'main+::'`
7. Create a PR using the GitHub CLI (`gh pr create`)
8. Enable auto-merge with `gh pr merge <PR_NUMBER> --auto --squash`
